<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ë„¤ëª¨ë„¤ëª¨ ë¡œì§ ğŸ£</title>
<style>
  :root {
    --bg: #fffdf9;
    --cell: #fff;
    --line: #e0dcd4;
    --filled: #8cc0de;
    --cross: #ffb6b6;
    --text: #333;
    --accent: #ffd86b;
    --shadow: 0 4px 12px rgba(0,0,0,0.05);
  }
  * { box-sizing: border-box; }
  body {
    margin: 0;
    background: var(--bg);
    font-family: "Noto Sans KR", sans-serif;
    color: var(--text);
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 30px;
  }
  h1 {
    font-size: 2em;
    margin-bottom: 10px;
  }
  .subtitle {
    color: #777;
    margin-bottom: 20px;
  }
  .controls {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
  }
  button, select {
    background: var(--accent);
    border: none;
    border-radius: 8px;
    padding: 8px 14px;
    cursor: pointer;
    font-weight: bold;
    box-shadow: var(--shadow);
    transition: background 0.3s;
  }
  button:hover, select:hover {
    background: #ffe693;
  }
  select {
    appearance: none;
  }

  #board {
    display: grid;
    border: 2px solid var(--line);
    background: var(--cell);
    box-shadow: var(--shadow);
  }

  .cell {
    width: 28px;
    height: 28px;
    border: 1px solid var(--line);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    user-select: none;
    cursor: pointer;
    transition: background 0.15s;
  }

  .cell.filled {
    background: var(--filled);
  }
  .cell.cross {
    color: var(--cross);
  }

  .hint-row, .hint-col {
    font-size: 12px;
    color: #555;
    text-align: center;
  }

  #status {
    margin-top: 20px;
    font-weight: bold;
    color: #555;
  }
</style>
</head>
<body>
  <h1>ë„¤ëª¨ë„¤ëª¨ ë¡œì§ ğŸ£</h1>
  <div class="subtitle">í¼ì¦ì„ ì™„ì„±í•´ë³´ì„¸ìš”!</div>

  <div class="controls">
    <select id="difficulty">
      <option value="easy">ë‚œì´ë„: í•˜</option>
      <option value="medium">ë‚œì´ë„: ì¤‘</option>
      <option value="hard">ë‚œì´ë„: ìƒ</option>
    </select>
    <button id="newGame">ìƒˆ ê²Œì„</button>
    <button id="check">ì •ë‹µ í™•ì¸</button>
    <button id="reset">ì´ˆê¸°í™”</button>
  </div>

  <div id="board"></div>
  <div id="status"></div>

<script>
/* ğŸ® ë„¤ëª¨ë„¤ëª¨ ë¡œì§ ê²Œì„ */
const boardEl = document.getElementById('board');
const difficultyEl = document.getElementById('difficulty');
const statusEl = document.getElementById('status');

let size = 5;
let solution = [];
let player = [];

function generatePuzzle(diff){
  // ë‚œì´ë„ë³„ í¬ê¸°
  if(diff === 'easy') size = 5;
  else if(diff === 'medium') size = 8;
  else size = 10;

  // ëœë¤í•œ í¼ì¦ ìƒì„±
  solution = Array.from({length:size}, () =>
    Array.from({length:size}, () => Math.random() > 0.6 ? 1 : 0)
  );
  player = Array.from({length:size}, ()=> Array(size).fill(0));

  drawBoard();
}

function drawBoard(){
  boardEl.innerHTML = '';
  boardEl.style.gridTemplateColumns = `repeat(${size}, 28px)`;
  boardEl.style.gridTemplateRows = `repeat(${size}, 28px)`;
  for(let y=0; y<size; y++){
    for(let x=0; x<size; x++){
      const cell = document.createElement('div');
      cell.classList.add('cell');
      cell.dataset.x = x;
      cell.dataset.y = y;
      boardEl.appendChild(cell);
    }
  }
}

function render(){
  document.querySelectorAll('.cell').forEach(cell=>{
    const x = +cell.dataset.x, y = +cell.dataset.y;
    cell.classList.remove('filled','cross');
    cell.textContent = '';
    if(player[y][x] === 1) cell.classList.add('filled');
    if(player[y][x] === 2) cell.textContent = 'âœ•', cell.classList.add('cross');
  });
}

boardEl.addEventListener('click', e=>{
  if(!e.target.classList.contains('cell')) return;
  const x = +e.target.dataset.x;
  const y = +e.target.dataset.y;
  // ì™¼ìª½ í´ë¦­ = ìƒ‰ì¹ 
  player[y][x] = (player[y][x] === 1) ? 0 : 1;
  render();
});

boardEl.addEventListener('contextmenu', e=>{
  e.preventDefault();
  if(!e.target.classList.contains('cell')) return;
  const x = +e.target.dataset.x;
  const y = +e.target.dataset.y;
  // ì˜¤ë¥¸ìª½ í´ë¦­ = Xí‘œ
  player[y][x] = (player[y][x] === 2) ? 0 : 2;
  render();
});

// ëª¨ë°”ì¼ ë”ë¸”íƒ­ â†’ Xí‘œì‹œ
let lastTap = 0;
boardEl.addEventListener('touchend', e=>{
  const now = Date.now();
  if(now - lastTap < 300){
    const target = document.elementFromPoint(e.changedTouches[0].clientX, e.changedTouches[0].clientY);
    if(target && target.classList.contains('cell')){
      const x = +target.dataset.x, y = +target.dataset.y;
      player[y][x] = (player[y][x] === 2) ? 0 : 2;
      render();
    }
  }
  lastTap = now;
});

// ë²„íŠ¼ ê¸°ëŠ¥
document.getElementById('newGame').addEventListener('click', ()=>{
  generatePuzzle(difficultyEl.value);
  statusEl.textContent = 'ìƒˆ í¼ì¦ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!';
});
document.getElementById('reset').addEventListener('click', ()=>{
  player = Array.from({length:size}, ()=> Array(size).fill(0));
  render();
  statusEl.textContent = 'ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤!';
});
document.getElementById('check').addEventListener('click', ()=>{
  let correct = true;
  for(let y=0;y<size;y++){
    for(let x=0;x<size;x++){
      if(player[y][x]===1 && solution[y][x]!==1) correct=false;
      if(player[y][x]!==1 && solution[y][x]===1) correct=false;
    }
  }
  statusEl.textContent = correct ? 'ğŸ‰ ì •ë‹µì…ë‹ˆë‹¤!' : 'ğŸ˜… ì•„ì§ ì™„ì„±ë˜ì§€ ì•Šì•˜ì–´ìš”!';
});

// ì´ˆê¸° ì‹¤í–‰
generatePuzzle('easy');
render();
</script>
</body>
</html>
